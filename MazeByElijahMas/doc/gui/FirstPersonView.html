<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_221) on Mon Oct 28 23:38:41 EDT 2019 -->
<title>FirstPersonView</title>
<meta name="date" content="2019-10-28">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FirstPersonView";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FirstPersonView.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../gui/ExplorerTest.html" title="class in gui"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../gui/FirstPersonView.FloatPair.html" title="class in gui"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?gui/FirstPersonView.html" target="_top">Frames</a></li>
<li><a href="FirstPersonView.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gui</div>
<h2 title="Class FirstPersonView" class="title">Class FirstPersonView</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gui.FirstPersonView</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">FirstPersonView</span>
extends java.lang.Object</pre>
<div class="block">This class encapsulates all functionality for drawing the current view 
 at the maze from a first person perspective.
 It is an drawing agent with redraw as its public method to redraw 
 the maze while the user plays, i.e. navigates through the maze.

 This code is refactored code from Maze.java by Paul Falstad, 
 www.falstad.com, Copyright (C) 1998, all rights reserved
 Paul Falstad granted permission to modify and use code for teaching purposes.
 Refactored by Peter Kemper</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.FloatPair.html" title="class in gui">FirstPersonView.FloatPair</a></span></code>
<div class="block">Trivial class to hold to double values.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.RangePair.html" title="class in gui">FirstPersonView.RangePair</a></span></code>
<div class="block">Trivial class to hold 4 integer values.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#allVisible">allVisible</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#angle">angle</a></span></code>
<div class="block">The current viewing angle.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../generation/BSPNode.html" title="class in generation">BSPNode</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#bspRoot">bspRoot</a></span></code>
<div class="block">The root node to a tree with walls (Wall objects) in its leaves.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#deepDebug">deepDebug</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#drawRectCounter">drawRectCounter</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#drawRectLateCounter">drawRectLateCounter</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#drawRectWallCounter">drawRectWallCounter</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.awt.Graphics2D</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#gc">gc</a></span></code>
<div class="block">The drawing is performed on a Graphics object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#mapUnit">mapUnit</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#nesting">nesting</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../gui/RangeSet.html" title="class in gui">RangeSet</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#rSet">rSet</a></span></code>
<div class="block">If one focuses on the x-axis for the first person view 
 and looks at the center line (the horizon), one recognizes
 that for any [x,x+1] interval, there is either  
 an opening for the special case of the exit or 
 exactly 1 wall shown.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#scaleZ">scaleZ</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../generation/Floorplan.html" title="class in generation">Floorplan</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#seenWalls">seenWalls</a></span></code>
<div class="block">A data structure to store which wallboards have been visible during
 the game.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#stepSize">stepSize</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#traverseNodeCounter">traverseNodeCounter</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#traverseWallSectorCounter">traverseWallSectorCounter</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#viewHeight">viewHeight</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#viewWidth">viewWidth</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#viewX">viewX</a></span></code>
<div class="block">The current position (x,y) scaled by map_unit and 
 modified by the view direction is stored in fields (viewX, viewY).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#viewY">viewY</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#viewZ">viewZ</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#FirstPersonView-int-int-int-int-generation.Floorplan-generation.BSPNode-">FirstPersonView</a></span>(int&nbsp;width,
               int&nbsp;height,
               int&nbsp;mapUnit,
               int&nbsp;stepSize,
               <a href="../generation/Floorplan.html" title="class in generation">Floorplan</a>&nbsp;seenWalls,
               <a href="../generation/BSPNode.html" title="class in generation">BSPNode</a>&nbsp;bspRoot)</code>
<div class="block">Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#boundingBoxIsVisible-generation.BSPNode-">boundingBoxIsVisible</a></span>(<a href="../generation/BSPNode.html" title="class in generation">BSPNode</a>&nbsp;node)</code>
<div class="block">Decide if the bounding box is visible</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#dbg-java.lang.String-">dbg</a></span>(java.lang.String&nbsp;str)</code>
<div class="block">Helper method for debugging</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#draw-gui.MazePanel-int-int-int-int-">draw</a></span>(<a href="../gui/MazePanel.html" title="class in gui">MazePanel</a>&nbsp;panel,
    int&nbsp;x,
    int&nbsp;y,
    int&nbsp;walkStep,
    int&nbsp;ang)</code>
<div class="block">Draws the first person view on the screen during the game</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#drawAllVisibleSectors-generation.BSPNode-">drawAllVisibleSectors</a></span>(<a href="../generation/BSPNode.html" title="class in generation">BSPNode</a>&nbsp;node)</code>
<div class="block">Recursive method to explore tree of BSP nodes and draw all walls in leaf nodes 
 where the bounding box is visible</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#drawAllWallsOfASector-generation.BSPLeaf-">drawAllWallsOfASector</a></span>(<a href="../generation/BSPLeaf.html" title="class in generation">BSPLeaf</a>&nbsp;node)</code>
<div class="block">Traverses all walls of this leaf and draws corresponding rectangles on screen</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#drawBackground-java.awt.Graphics-">drawBackground</a></span>(java.awt.Graphics&nbsp;graphics)</code>
<div class="block">Draws a black and a grey rectangle to provide a background.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#drawPolygons-int-int-int-int-int-int-">drawPolygons</a></span>(int&nbsp;x1,
            int&nbsp;x2,
            int&nbsp;y11,
            int&nbsp;y12,
            int&nbsp;y21,
            int&nbsp;y22)</code>
<div class="block">Draws all polygons for the parts of a wall that are visible.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#drawWall-generation.Wall-">drawWall</a></span>(<a href="../generation/Wall.html" title="class in generation">Wall</a>&nbsp;wall)</code>
<div class="block">Draws wall on screen via graphics attribute gc.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private <a href="../gui/FirstPersonView.RangePair.html" title="class in gui">FirstPersonView.RangePair</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#getNewRangePair-int-int-int-int-">getNewRangePair</a></span>(int&nbsp;p1x,
               int&nbsp;p2x,
               int&nbsp;p1y,
               int&nbsp;p2y)</code>
<div class="block">Instantiates a new RangePair for the given parameters.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#getViewDX-int-">getViewDX</a></span>(int&nbsp;angle)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#getViewDY-int-">getViewDY</a></span>(int&nbsp;angle)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#isOutOfView-generation.BSPNode-">isOutOfView</a></span>(<a href="../generation/BSPNode.html" title="class in generation">BSPNode</a>&nbsp;node)</code>
<div class="block">Checks if bounding box for current node is out of view.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>(package private) double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#radify-int-">radify</a></span>(int&nbsp;x)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#setView-int-int-int-">setView</a></span>(int&nbsp;x,
       int&nbsp;y,
       int&nbsp;walkStep)</code>
<div class="block">Updates viewX and viewY based on current angle and for current position.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../gui/FirstPersonView.html#unscaleViewD-int-">unscaleViewD</a></span>(int&nbsp;x)</code>
<div class="block">Unscale given value</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="viewZ">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>viewZ</h4>
<pre>final&nbsp;int viewZ</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../constant-values.html#gui.FirstPersonView.viewZ">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="viewWidth">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>viewWidth</h4>
<pre>private final&nbsp;int viewWidth</pre>
</li>
</ul>
<a name="viewHeight">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>viewHeight</h4>
<pre>private final&nbsp;int viewHeight</pre>
</li>
</ul>
<a name="mapUnit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapUnit</h4>
<pre>private final&nbsp;int mapUnit</pre>
</li>
</ul>
<a name="stepSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stepSize</h4>
<pre>private final&nbsp;int stepSize</pre>
</li>
</ul>
<a name="seenWalls">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>seenWalls</h4>
<pre>private final&nbsp;<a href="../generation/Floorplan.html" title="class in generation">Floorplan</a> seenWalls</pre>
<div class="block">A data structure to store which wallboards have been visible during
 the game. The MapDrawer can color highlight such wallboards and the 
 FirstPersonDrawer supports this by storing this information.</div>
</li>
</ul>
<a name="bspRoot">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bspRoot</h4>
<pre>private final&nbsp;<a href="../generation/BSPNode.html" title="class in generation">BSPNode</a> bspRoot</pre>
<div class="block">The root node to a tree with walls (Wall objects) in its leaves.
 This data structure carries the information about walls
 to draw. Walls are drawn as filled polygons. 
 The content for this tree is determined in MazeBuilder
 when the maze is created. 
 It also used to decide visibility of walls.</div>
</li>
</ul>
<a name="angle">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>angle</h4>
<pre>private&nbsp;int angle</pre>
<div class="block">The current viewing angle. This information is used in rotations
 and checking if the bounding box is visible to recognize special cases.
 It is only set in the draw method before the first person
 drawer starts drawing the new first person scene.
 An initial value of 0 matches East.</div>
</li>
</ul>
<a name="gc">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gc</h4>
<pre>private&nbsp;java.awt.Graphics2D gc</pre>
<div class="block">The drawing is performed on a Graphics object. Storing it makes
 its access easier for code that traverses the tree of BSP nodes
 to draw walls. Drawing is performed in a piecemeal manner on
 a buffer image, such that updating the panel that is on screen 
 with the current buffer image is the responsibility of
 the StatePlaying class.</div>
</li>
</ul>
<a name="viewX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>viewX</h4>
<pre>private&nbsp;int viewX</pre>
<div class="block">The current position (x,y) scaled by map_unit and 
 modified by the view direction is stored in fields (viewX, viewY).
 Values are set in the draw method. viewX gives the x coordinate,
 viewY the y coordinate.</div>
</li>
</ul>
<a name="viewY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>viewY</h4>
<pre>private&nbsp;int viewY</pre>
</li>
</ul>
<a name="scaleZ">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scaleZ</h4>
<pre>private final&nbsp;int scaleZ</pre>
</li>
</ul>
<a name="rSet">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rSet</h4>
<pre>private&nbsp;<a href="../gui/RangeSet.html" title="class in gui">RangeSet</a> rSet</pre>
<div class="block">If one focuses on the x-axis for the first person view 
 and looks at the center line (the horizon), one recognizes
 that for any [x,x+1] interval, there is either  
 an opening for the special case of the exit or 
 exactly 1 wall shown. So we can keep track of the intervals
 [x,x+delta_x] that we have already drawn a wall for and
 the intervals that still may need to be covered.
 The rset keeps track of candidate intervals that may still
 need to be covered. 
 It is initialized in the draw method to cover the whole width
 of the view. 
 Whenever polygons for walls are drawn, the covered interval
 is removed from the range set. Which can imply that we either
 shorten overlapping intervals in rset or split an existing 
 interval.
 The rset allows us to omit walls that are not needed.</div>
</li>
</ul>
<a name="deepDebug">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deepDebug</h4>
<pre>private&nbsp;boolean deepDebug</pre>
</li>
</ul>
<a name="allVisible">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allVisible</h4>
<pre>private&nbsp;boolean allVisible</pre>
</li>
</ul>
<a name="traverseNodeCounter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>traverseNodeCounter</h4>
<pre>private&nbsp;int traverseNodeCounter</pre>
</li>
</ul>
<a name="traverseWallSectorCounter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>traverseWallSectorCounter</h4>
<pre>private&nbsp;int traverseWallSectorCounter</pre>
</li>
</ul>
<a name="drawRectCounter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawRectCounter</h4>
<pre>private&nbsp;int drawRectCounter</pre>
</li>
</ul>
<a name="drawRectLateCounter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawRectLateCounter</h4>
<pre>private&nbsp;int drawRectLateCounter</pre>
</li>
</ul>
<a name="drawRectWallCounter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawRectWallCounter</h4>
<pre>private&nbsp;int drawRectWallCounter</pre>
</li>
</ul>
<a name="nesting">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>nesting</h4>
<pre>private&nbsp;int nesting</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FirstPersonView-int-int-int-int-generation.Floorplan-generation.BSPNode-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FirstPersonView</h4>
<pre>public&nbsp;FirstPersonView(int&nbsp;width,
                       int&nbsp;height,
                       int&nbsp;mapUnit,
                       int&nbsp;stepSize,
                       <a href="../generation/Floorplan.html" title="class in generation">Floorplan</a>&nbsp;seenWalls,
                       <a href="../generation/BSPNode.html" title="class in generation">BSPNode</a>&nbsp;bspRoot)</pre>
<div class="block">Constructor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>width</code> - of display</dd>
<dd><code>height</code> - of display</dd>
<dd><code>mapUnit</code> - current scaling factor</dd>
<dd><code>stepSize</code> - </dd>
<dd><code>seenWalls</code> - to store which walls were put on display</dd>
<dd><code>bspRoot</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="draw-gui.MazePanel-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>draw</h4>
<pre>public&nbsp;void&nbsp;draw(<a href="../gui/MazePanel.html" title="class in gui">MazePanel</a>&nbsp;panel,
                 int&nbsp;x,
                 int&nbsp;y,
                 int&nbsp;walkStep,
                 int&nbsp;ang)</pre>
<div class="block">Draws the first person view on the screen during the game</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>panel</code> - for drawing on the buffer image</dd>
<dd><code>x</code> - coordinate of current position, only used to set viewX</dd>
<dd><code>y</code> - coordinate of current position, only used to set viewY</dd>
<dd><code>ang</code> - gives the current viewing angle</dd>
<dd><code>walkStep,</code> - only used to set viewX and viewY</dd>
</dl>
</li>
</ul>
<a name="getViewDX-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getViewDX</h4>
<pre>private&nbsp;int&nbsp;getViewDX(int&nbsp;angle)</pre>
</li>
</ul>
<a name="getViewDY-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getViewDY</h4>
<pre>private&nbsp;int&nbsp;getViewDY(int&nbsp;angle)</pre>
</li>
</ul>
<a name="radify-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>radify</h4>
<pre>final&nbsp;double&nbsp;radify(int&nbsp;x)</pre>
</li>
</ul>
<a name="setView-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setView</h4>
<pre>private&nbsp;void&nbsp;setView(int&nbsp;x,
                     int&nbsp;y,
                     int&nbsp;walkStep)</pre>
<div class="block">Updates viewX and viewY based on current angle and for current position.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>x</code> - coordinate of current position</dd>
<dd><code>y</code> - coordinate of current position</dd>
<dd><code>walkStep</code> - goes into a scaling factor</dd>
</dl>
</li>
</ul>
<a name="drawBackground-java.awt.Graphics-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawBackground</h4>
<pre>private&nbsp;void&nbsp;drawBackground(java.awt.Graphics&nbsp;graphics)</pre>
<div class="block">Draws a black and a grey rectangle to provide a background.
 Note that this also erases previous drawings of maze or map.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>graphics</code> - to draw on, must be not null</dd>
</dl>
</li>
</ul>
<a name="drawAllVisibleSectors-generation.BSPNode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawAllVisibleSectors</h4>
<pre>private&nbsp;void&nbsp;drawAllVisibleSectors(<a href="../generation/BSPNode.html" title="class in generation">BSPNode</a>&nbsp;node)</pre>
<div class="block">Recursive method to explore tree of BSP nodes and draw all walls in leaf nodes 
 where the bounding box is visible</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>node</code> - is the current node of interest</dd>
</dl>
</li>
</ul>
<a name="boundingBoxIsVisible-generation.BSPNode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>boundingBoxIsVisible</h4>
<pre>private&nbsp;boolean&nbsp;boundingBoxIsVisible(<a href="../generation/BSPNode.html" title="class in generation">BSPNode</a>&nbsp;node)</pre>
<div class="block">Decide if the bounding box is visible</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>node</code> - the current node</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if node should be drawn, false otherwise</dd>
</dl>
</li>
</ul>
<a name="getNewRangePair-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNewRangePair</h4>
<pre>private&nbsp;<a href="../gui/FirstPersonView.RangePair.html" title="class in gui">FirstPersonView.RangePair</a>&nbsp;getNewRangePair(int&nbsp;p1x,
                                                  int&nbsp;p2x,
                                                  int&nbsp;p1y,
                                                  int&nbsp;p2y)</pre>
<div class="block">Instantiates a new RangePair for the given parameters.
 Parameter values are adjusted for the viewing direction.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p1x</code> - x coordinate of first point</dd>
<dd><code>p2x</code> - x coordinate of 2nd point</dd>
<dd><code>p1y</code> - y coordinate of first point</dd>
<dd><code>p2y</code> - y coordinate of 2nd point</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>new RangePair for adjusted parameters</dd>
</dl>
</li>
</ul>
<a name="isOutOfView-generation.BSPNode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOutOfView</h4>
<pre>private&nbsp;boolean&nbsp;isOutOfView(<a href="../generation/BSPNode.html" title="class in generation">BSPNode</a>&nbsp;node)</pre>
<div class="block">Checks if bounding box for current node is out of view.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>node</code> - the current node</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if any of the special cases match, false otherwise</dd>
</dl>
</li>
</ul>
<a name="drawAllWallsOfASector-generation.BSPLeaf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawAllWallsOfASector</h4>
<pre>private&nbsp;void&nbsp;drawAllWallsOfASector(<a href="../generation/BSPLeaf.html" title="class in generation">BSPLeaf</a>&nbsp;node)</pre>
<div class="block">Traverses all walls of this leaf and draws corresponding rectangles on screen</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>node</code> - is the leaf node</dd>
</dl>
</li>
</ul>
<a name="drawWall-generation.Wall-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawWall</h4>
<pre>private&nbsp;void&nbsp;drawWall(<a href="../generation/Wall.html" title="class in generation">Wall</a>&nbsp;wall)</pre>
<div class="block">Draws wall on screen via graphics attribute gc.
 Helper method for drawAllWallsOfASector.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>wall</code> - whose seen attribute may be set to true</dd>
</dl>
</li>
</ul>
<a name="drawPolygons-int-int-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drawPolygons</h4>
<pre>private&nbsp;boolean&nbsp;drawPolygons(int&nbsp;x1,
                             int&nbsp;x2,
                             int&nbsp;y11,
                             int&nbsp;y12,
                             int&nbsp;y21,
                             int&nbsp;y22)</pre>
<div class="block">Draws all polygons for the parts of a wall that are visible.
 A single wall can contribute more than one polygon on the
 x-axis, e.g. if there is a room with 2 doors on one side
 and the same single long wall may be seen through both
 doors.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>x1</code> - is the low end of the interval <code>x1 &lt; x2</code></dd>
<dd><code>x2</code> - is the high end of the interval</dd>
<dd><code>y11</code> - </dd>
<dd><code>y12</code> - </dd>
<dd><code>y21</code> - </dd>
<dd><code>y22</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if at least one polygon has been drawn, false otherwise</dd>
</dl>
</li>
</ul>
<a name="unscaleViewD-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unscaleViewD</h4>
<pre>final&nbsp;int&nbsp;unscaleViewD(int&nbsp;x)</pre>
<div class="block">Unscale given value</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>x</code> - input value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>unscaled input</dd>
</dl>
</li>
</ul>
<a name="dbg-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dbg</h4>
<pre>private&nbsp;void&nbsp;dbg(java.lang.String&nbsp;str)</pre>
<div class="block">Helper method for debugging</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>str</code> - is the message</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FirstPersonView.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../gui/ExplorerTest.html" title="class in gui"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../gui/FirstPersonView.FloatPair.html" title="class in gui"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?gui/FirstPersonView.html" target="_top">Frames</a></li>
<li><a href="FirstPersonView.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
